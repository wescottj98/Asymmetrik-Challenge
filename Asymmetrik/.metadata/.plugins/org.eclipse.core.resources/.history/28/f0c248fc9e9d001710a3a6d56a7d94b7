import java.util.List;
import java.util.ArrayList;

public class AutoComplete implements AutocompleteProvider {

/*	private String fragment;
	private String passage;*/
	private ArrayList<Candidate> words = new ArrayList<Candidate>();
	
	public AutoComplete(/*String fragment, String passage*/) {
		/*this.fragment = fragment;
		this.passage = passage;*/
	}
	
	public List<Candidate> getWords(String fragment){
		ArrayList<Candidate> preSuggestion = new ArrayList<Candidate>();
		for(int index = 0; index < words.size(); index++) {
			try {
				if((words.get(index).getWord().substring(0, fragment.length()).equals(fragment))) {		
					preSuggestion.add(words.get(index));
				}
			}catch(java.lang.StringIndexOutOfBoundsException e) {
				
			}
		}
		ArrayList<Candidate> postSuggestion = new ArrayList<Candidate>();
		for(int x = 0;x<preSuggestion.size();x++) {
			if(postSuggestion.isEmpty()) {
				postSuggestion.add(preSuggestion.get(x));
				preSuggestion.remove(0);
			}
			for(int y = 0; y< postSuggestion.size();y++) {
				if(preSuggestion.get(x).equals(postSuggestion.get(y))) {
					WordCandidate nCand = new WordCandidate(preSuggestion.get(x).getWord(),postSuggestion.get(y).getConfidence()+1);
					postSuggestion.remove(y);
					preSuggestion.remove(x+1);
					postSuggestion.add(y,nCand);
					System.out.println("reach");
					break;
				}
				postSuggestion.add(preSuggestion.get(x));
				//preSuggestion.remove(x);
				//break;
				
				
				//postSuggestion.add(preSuggestion.get(x));
			}
			System.out.println("complete");
		}
		return postSuggestion;
	}
	public void train(String passage) {
		//ArrayList<WordCandidate> words = new ArrayList<WordCandidate>();
		System.out.println("1");
		passage = passage.replace(".", " ");
		passage = passage.replace("!", " ");
		passage = passage.replace("?", " ");
		passage += " ";
		while(passage.indexOf(' ')!=-1) {
			System.out.println(passage.indexOf(' '));
			WordCandidate potentialWord = new WordCandidate(passage.substring(0, passage.indexOf(' ')),1);
			words.add(potentialWord);
			System.out.println(passage);
			System.out.println(potentialWord.getWord());
			passage = passage.substring(passage.indexOf(' ')+1);
		}
		System.out.println("2");
	}
	

}
